<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/Chart.min.js"></script>
	<title>Estadisticas</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/sweetalert2.css">
	<link rel="stylesheet" href="css/material.min.css">
	<link rel="stylesheet" href="css/material-design-iconic-font.min.css">
	<link rel="stylesheet" href="css/jquery.mCustomScrollbar.css">
	<link rel="stylesheet" href="css/main.css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.2.min.js"><\/script>')</script>
	<script src="js/material.min.js" ></script>
	<script src="js/sweetalert2.min.js" ></script>
	<script src="js/jquery.mCustomScrollbar.concat.min.js" ></script>
	<script src="js/main.js" ></script>
</head>
<body>
	<section class="full-width container-notifications">
		<div class="full-width container-notifications-bg btn-Notification"></div>
	    <section class="NotificationArea">
	        <div class="full-width text-center NotificationArea-title tittles">Advertencias<i class="zmdi zmdi-close btn-Notification"></i></div>
	        <a href="#" class="Notification" id="notifation-unread-1">
	            <div class="Notification-icon"><i class="zmdi zmdi-accounts-alt bg-info"></i></div>
	            <div class="Notification-text">
	                <p>
	                    <i class="zmdi zmdi-circle"></i>
	                    <strong>Secretaria General... REVISANDO ESTADISTICAS</strong> 
	                    <br>
	                    <small>Justo Ahora</small>
	                </p>
	            </div>
	        	<div class="mdl-tooltip mdl-tooltip--left" for="notifation-unread-1">Notification as UnRead</div> 
	        </a>
	        <a href="#" class="Notification" id="notifation-read-1">
	            <div class="Notification-icon"><i class="zmdi zmdi-upload bg-success"></i></div>
	            <div class="Notification-text">
	                <p>
	                    <i class="zmdi zmdi-circle-o"></i>
	                    <strong>Nuevos Medicamentos</strong> 
	                    <br>
	                    <small>Justo Ahora</small>
	                </p>
	            </div>
	            <div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-1">Advertencia Leida</div>
	        </a>
	        <a href="#" class="Notification" id="notifation-unread-2">
	            <div class="Notification-icon"><i class="zmdi zmdi-mail-send bg-danger
"></i></div>
	            <div class="Notification-text">
	                <p>
	                    <i class="zmdi zmdi-circle"></i>
	                    <strong>Fluconazol ¡CADUCADO!</strong> 
	                    <br>
	                    <small>Hace 3 Minutos</small>
	                </p>
	            </div>
	            <div class="mdl-tooltip mdl-tooltip--left" for="notifation-unread-2">Advertencia no leida</div>
	        </a> 
	        <a href="#" class="Notification" id="notifation-read-2">
	            <div class="Notification-icon"><i class="zmdi zmdi-mail-send bg-danger"></i></div>
	            <div class="Notification-text">
	                <p>
	                    <i class="zmdi zmdi-circle-o"></i>
	                    <strong>Calcitrion ¡AGOTADO!</strong> 
	                    <br>
	                    <small>Hace 1 Minuto</small>
	                </p>
	            </div>
	            <div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-2">Advertencia Leida</div>
	        </a>
	        <a href="#" class="Notification" id="notifation-read-3">
	            <div class="Notification-icon"><i class="zmdi zmdi-folder bg-primary"></i></div>
	            <div class="Notification-text">
	                <p>
	                    <i class="zmdi zmdi-circle-o"></i>
	                    <strong>Bezafibrato ¡PRONTO A CADUCAR!</strong> 
	                    <br>
	                    <small>Hace 10 Minutos</small>
	                </p>
	            </div>
	            <div class="mdl-tooltip mdl-tooltip--left" for="notifation-read-3">Advertencia Leida</div>
	        </a>  
	    </section>
	</section>
	<div class="full-width navBar">
		<div class="full-width navBar-options">
			<i class="zmdi zmdi-more-vert btn-menu" id="btn-menu"></i>	
			<div class="mdl-tooltip" for="btn-menu">Menu</div>
			<nav class="navBar-options-list">
				<ul class="list-unstyle">
					<li class="btn-Notification" id="notifications">
						<i class="zmdi zmdi-notifications"></i>
						
						<div class="mdl-tooltip" for="notifications">Notificationes</div>
					</li>
					<li class="btn-exit" id="btn-exit">
						<i class="zmdi zmdi-power"></i>
						<div class="mdl-tooltip" for="btn-exit">Cerrar Sesion</div>
					</li>
					<li class="text-condensedLight noLink" ><small>Administrador</small></li>
					<li class="noLink">
						<figure>
							<img src="assets/img/avatar-female.png" alt="Avatar" class="img-responsive">
						</figure>
					</li>
				</ul>
			</nav>
		</div>
	</div>
	<section class="full-width navLateral">
		<div class="full-width navLateral-bg btn-menu"></div>
		<div class="full-width navLateral-body">
			<div class="full-width navLateral-body-logo text-center tittles">
				<i class="zmdi zmdi-close btn-menu"></i> 
			</div>
			<figure class="full-width" style="height: 80px;">
				<div class="navLateral-body-cl">
					<img src="assets/img/saludM.png" class="img-responsive">
				</div>
				<figcaption class="navLateral-body-cr hide-on-tablet">
					<span style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;">
						NEMILIS<br>
						<small>Sistema de Inventario</small>
					</span>
				</figcaption>
			</figure>
		<div class="full-width tittles navLateral-body-tittle-menu">
		<i class="zmdi zmdi-view-compact"></i><span class="hide-on-tablet">&nbsp;Estadisticas</span>
			</div>
			<nav class="full-width">
				<ul class="full-width list-unstyle menu-principal">
				
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a  class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-accounts-list"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
							Administración
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="administrador.php" class="full-width">
									<div class="navLateral-body-cl">
									<i class="zmdi zmdi-account-add"></i>
									</div>
									<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
										Registro
									</div>
								</a>
							</li>
							<a href="listadmin.php" class="full-width">
									<div class="navLateral-body-cl">
									<i class="zmdi zmdi-account-circle"></i>
									</div>
									<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
										Perfil
									</div>
								</a>
							</li>
						</ul>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
							<i class="zmdi zmdi-accounts"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
								Médicos
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="medicos.php" class="full-width">
									<div class="navLateral-body-cl">
									<i class="zmdi zmdi-account-add"></i>
									</div>
									<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
										Registro
									</div>
									<a href="listamedicos.php" class="full-width">
										<div class="navLateral-body-cl">
										<i class="zmdi zmdi-account-circle"></i>
										</div>
										<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
											Perfil
										</div>
										<a href="Nuevareceta.php" class="full-width">
											<div class="navLateral-body-cl">
											<i class="zmdi zmdi-view-subtitles"></i>
											</div>
											<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
												Receta
											</div>
									</a>
									<a href="resultadoreceta.php" class="full-width">
											<div class="navLateral-body-cl">
											<i class="zmdi zmdi-folder-person"></i>
											</div>
											<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
												Historial
											</div>
									</a>
									</a>
									</ul>
								</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a  class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-accounts"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
								Pacientes
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="usuarios.php" class="full-width">
									<div class="navLateral-body-cl">
									<i class="zmdi zmdi-account-add"></i>
									</div>
									<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
										Registro
									</div>
									<a href="listausu.php" class="full-width">
										<div class="navLateral-body-cl">
										<i class="zmdi zmdi-account-circle"></i>
										</div>
										<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
											Perfil
										</div>
									</a>
						<a href="verrece.php" class="full-width">
							<div class="navLateral-body-cl">
							<i class="zmdi zmdi-view-subtitles"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
								Receta
							</div>
						</a>
						</a>
						</ul>
					</li>
					<li class="full-width divider-menu-h"></li>
					<li class="full-width">
						<a  class="full-width btn-subMenu">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-library"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
								Inventario
							</div>
							<span class="zmdi zmdi-chevron-left"></span>
						</a>
						<ul class="full-width menu-principal sub-menu-options">
							<li class="full-width">
								<a href="actualinventario.php" class="full-width">
									<div class="navLateral-body-cl">
									<i class="zmdi zmdi-group"></i> 
									</div>
									<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
										Inventario
									</div>
									<a href="entradas.php" class="full-width">
										<div class="navLateral-body-cl">
											<i class="zmdi zmdi-upload"></i>
										</div>
										<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
											Ingresos
										</div>
									</a>
						<a href="salidas.php" class="full-width">
							<div class="navLateral-body-cl">
							<i class="zmdi zmdi-download"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
								Salidas
							</div>
						</a>
						<a href="estadisticas.php" class="full-width">
							<div class="navLateral-body-cl">
								<i class="zmdi zmdi-view-compact"></i>
							</div>
							<div class="navLateral-body-cr hide-on-tablet" style='font-size: 18px'>
							Estadísticas
							</div>
						</a>
						</ul>
					</li>
			</nav>
		</div>
	</section>
	</section>
	<section class="full-width pageContent">
		<section class="full-width header-well">
			<div class="full-width header-well-icon">
			</div>
		<pre> 
            <h3 class="text-center tittles">El sistema permite la consulta y descarga de datos estadísticos de medicamentos según los periodos <br/>Funcion solo para administradores.</h3>	
		</pre>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.1/css/bootstrap.min.css" integrity="sha512-T584yQ/tdRR5QwOpfvDfVQUidzfgc2339Lc8uBDtcp/wYu80d7jwBgAxbyMh0a9YM9F8N3tdErpFI8iaGx6x5g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/dataTables.bootstrap.min.css" integrity="sha512-BMbq2It2D3J17/C7aRklzOODG1IQ3+MHw3ifzBHMBwGO/0yUqYmsStgBjI0z5EYlaDEFnvYV7gNYdD3vFLRKsA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
                    <div class="col-12" style="width: 100%; height: 50%; text-align: center;">
                        <?php

                        $conexion = mysqli_connect('localhost', 'root', '', 'inventario')

                        ?>

                        <canvas id="myChart" width="400" height="120" padding="10px"></canvas>
                        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                        <script>
                        const ctx = document.getElementById('myChart').getContext('2d');
                        const myChart = new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: [
                                <?php

                                $sql = "SELECT * FROM salidas";
                                $result = mysqli_query($conexion,$sql);
                                while ($registros = mysqli_fetch_array($result))
                                {
                                ?>
                                    '<?php echo $registros["nombre"] ?>',
                                <?php
                                }
                                ?>
                            ],
                            datasets: [{
                                label: 'Sector 1',
                                data: [
                                    <?php
                                    $sql = "SELECT * FROM salidas";
                                    $result = mysqli_query($conexion,$sql);
                                    ?>
                                    <?php while ($registros = mysqli_fetch_array($result)){ ?><?php echo $registros['cantidad'] ?>,
                                    <?php } ?>],
                                backgroundColor: [
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */ 
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
                                ],
                                borderColor: [
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
									'rgba(75, 192, 192, 0.2)',/**azul */
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                        });
                        </script>
                    </div>
				</span>
			</div>
	</section>
	</div>
	<div class="mdl-cell mdl-cell--4-col-phone mdl-cell--8-col-tablet mdl-cell--12-col-desktop">
	<table class='mdl-data-table mdl-js-data-table mdl-shadow--2dp full-width ' style="width: 60%; padding">
                                        <thead><tr><th class='mdl-data-table__cell--non-numeric' style='font-size: 18px'>ID</th>
										<th style='font-size: 18px'>Fecha</th>
										<th style='font-size: 18px'>Nombre</th>
                                        <th style='font-size: 18px'>Categoria</th>
                                        <th style='font-size: 18px'>Cantidad</th>
                                    </tr></thead><tbody>
			                            <?php

                                            try 
                                            {
                                                
                                                $conMySQL = new PDO("mysql:host=localhost;port=3306;dbname=inventario","root","");

                                                $conMySQL->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
                                                $conMySQL->exec("SET CHARACTER SET UTF8");
                                                
                                                $sentenciaSQL= "SELECT * FROM  salidas";

                                                foreach($conMySQL->query($sentenciaSQL) as $fila)
                                                {
                                                    echo "
                                                    <tr>
                                                        <td>".$fila['id']."</td>
														<td>".$fila['fecha']."</td>
														<td>".$fila['nombre']."</td>
                                                        <td>".$fila['categoria']."</td>
                                                        <td>".$fila['cantidad']."</td>";
                                                
                                                }
                                                
                                            }
                                            catch (PDOException $e)
                                            {

                                                printf ("¡Error!: ".$e->getMessage()."<br/>");
                                                die();

                                            }
                                            finally 
                                            {
                                                $conMySQL = null;
                                            }

                                        ?>
										<?php
											$conMySQL = new PDO("mysql:host=localhost;port=3306;dbname=inventario","root","");
											$conMySQL->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
											$conMySQL->exec("SET CHARACTER SET UTF8");

											$sql = "SELECT COUNT(*) total FROM salidas";
											$result = $conMySQL->query($sql); //$pdo sería el objeto conexión
											$total = $result->fetchColumn();
											echo 'Número de total de registros: ' . $total;
										?>
                                    </div>
                                </div>  
                            </form>
                        </div>
					</tbody>
				</table>
				<center>
				<input class="mdl-button mdl-button--raised mdl-button--colored" type="button" value="Imprimir formato pdf" onClick="window.print()">
										</center>
			</div>
</body>
</html> 